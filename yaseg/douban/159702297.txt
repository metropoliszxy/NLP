凯利公式及其在资金管理中的作用【转载】

       原文链接：        我们进入股市的目的是什么？    当然是挣钱，不过有很多人是来做游戏的，尽管他自己并不知道。    如何才算高手？    能够使资金稳定快速增值的人就是高手。    高手不是看他说了什么，而是看他做的什么，做的怎样。    成功率很重要吗？    显然不是，尤其是对短线来讲。成功率是让最多人失败的梦魇。    单次收益很重要吗？追涨停是最好的方式吗？    显然不是，股市风险和收益是成正相关的，追逐收益的同时你在放大你的风险。    资金越多越容易成功？资金越多盈利越难？    事实证明，资金的多少和盈利速度不相关。　  开始正题前，先要说一个前提。本人的观点，不论你是投资还是投机，合理运用你的资金是你获得优势的必备条件。     为了不让人有刁难，以后投资和投机同等对待，本文称投资。    关于凯利公式的由来及以后的运用，大家可以轻易查到。不再赘述。    先复习一下吧。    凯利公式(1)： F=((R+1)*P-1)/R       F=最佳投入资金比例；P=胜率；R=平均获利/平均亏损比。    凯利公式主要依据个人历史成绩，计算其所能承受的最适风险承受比例，事实上并不是投资的金额愈高，投资报酬就会愈高。    凯利公式让投资者清楚了解，应该以多少比例当作单次可承受风险的资本。    其实，影响最佳单笔投入比例的要素有:       (1)胜率(2)平均单笔盈利金额(3)平均单笔亏损金额。举例来说：    某投资者胜率50%，亦即100次交易 50次赚钱、50次赔钱，每笔获利相对于亏损为6000元/3000元=2 倍，则    F= ((2+1)*0.5-1)/2= 0.25=25%       结论是，他一次只能用25%的资金做投资。    注：这里有个条件假设，那就是每次只能操作一只个股。    承接上楼，进行反推。    如何提高资金的利用效率呢?       大家都知道，用25%的资金挣钱不如用更高的比例挣钱多。    按照这个思路走下来:       想要提高你的利用资金额，那么有两个方向去努力。    第一个是胜率P,第二个是盈亏比R。    我们绝大多数人对这个p，很感兴趣，是不是帖名有100%胜率，甚至80%胜率的帖子浏览者众多啊？    这个p,可以分解为 P=(p1+p2）/2       这是个不精确公式，希望高手指教。    p1为个人操作的历史成功率；p2为理论成功率(这大多也是历史数据统计而来)       我一般把p2设为50%，也许比较保守吧。一般的区间是45%-55%。    我的p1是统计计算的结果，早期是每周一次调节，现在是一月一调节。(其实就是用xls记录所有的操作，计算很简单的。现在稳定多了，一月计算一次即可。)       那么我自己的P,理论上最大不会超过75%，实际上比你想象的低得多。    没有精准的P，只有合适的P。    承接上楼:       第二个方向是R,R=平均盈利/平均亏损。    那么怎么提高R,就很简单了。截断亏损，让利润奔跑。是不是这个道理。    想要提高R,需要提高平均盈利。记住这里是平均盈利而不是某个单次盈利。    想要提高R,需要降低平均亏损。止损有意义了？    这里先留个话题。以后慢慢涉及。    如何提高R,甚至比提高P重要。    一般来讲，在P=50%的情况下，R>1才有操作的意义。    R>1.5以上,才能值得我们去做。    很多人提到一个经验R,是R=3比较适合操作。    有趣的是这个R,和P是相似的。R=(R1+R2)/2       R1是操作的历史盈亏比；R2是操作的单笔期望盈亏比。    显然，R1由统计而来。R2是主观色彩浓些。如何尽量量化R2是不是值得思考呢？    我的R2一般是取自技术分析，举例：箱体，上沿10元，下沿8元。当现在的价位是8.5元，获得支撑时。R2=(10-8.5)/(8.5-8)=3       由此，我们大致知道我们的努力方向了。看到很多人动辄满仓操作，实在是为其揪心啊。    上面提到，一般情况下，p最好能达到75%,R=3就很不错了。    那么 F=((3+1)*0.75-1)/3= 0.667=66.7%       那么这就是个经验数据了，如果某个高手全仓某只股票，那么他肯定不是什么实战的赢家。    一般在股市有盈利的大多是仓位不超过70%的。尤其是我在降低仓位后能够比以前的高仓位盈利更好更稳定之后，对此深信不疑。    有些人有疑问了?       我又不是只操作一只股票，那我操作两只甚至三只及以上怎么处理呢？    有这个疑问很好，我个人觉得分仓是降低总风险的不错方式。（具体推导过程本帖不讲）那么就好处理了。把账户分成若干仓位（资金少的话不要超过5个）。每个仓位再按照凯利公式提到的F进行操作。    这样就不会错过你心爱的票了。    还有一点，一般人会有自己账户止损额的限制，比如说每笔最多亏损总资金的2%之类，假如你没有，那么现在学还来得及。    我的一般做法是把这个额度给单一的仓，比如A仓吧。    当A仓的浮动止损（止盈点）在成本价以上时，再开B仓。同理，当AB都在成本价以上时，再开C仓。也许这时你的A仓已经获利了结了。但是有个原则，那就是只能有一个仓承担这个止损任务。（不如说是个责任）    如此，循环。    假如某仓止损，重新计算止损额度与执行计划。    有个建议，月亏损总账户的6%,那就休息吧。    也许市场趋势和你预料的不一致，也许你的心态有问题。总之，出现问题了，休息。　  亏损摊平，失败之初。    亏损摊平是失败的开始。    没有任何一个人是通过摊平亏损做到持续盈利的。    绝大多数的散户却非常喜欢这个策略。绝大多数散户做的必定是错的。    由最初的凯利公式可以得出的结论：胜率越高、可投入资金比例越高；每笔平均获利越高、可投入资金比例越高；每笔平均亏损越高、可投入资金比例越低等三个原则。    亏损需要做的是止损，而不是摊平。    就像做了错事，不是需要掩盖，而是承认错误。市场向来是对勇于承认错误者提出表扬，对死不认错者进行惩罚的。    对于如何止损，如果你水平不高的话，那就定额止损啊。    养成守纪律的习惯比抓黑马的难度要大。    有人问：我套了30%怎么办？    我无语，因为无法交流。我从来就没有设想过套30%。    如果你是崇尚价值、长线投资。那就继续持有吧。因为30%对你来说无所谓。甚至可以继续买。    但是大多数的人会做到吗？你会继续持有两年吗？    没有人能够做到一次不亏。但是一定要区分建仓浮亏和亏损。    一般来说适合建仓是个区间，我一般喜欢3次建仓法，也许趋势好的话是两次建仓。    补仓策略，金字塔式补仓    截断亏损但不能保证我们盈利，想要盈利就要放飞利润。    补仓是个不错的策略。    补仓只有可能是趋势向上的金字塔式补仓(目前大多数人只能做多)。    向下摊平我们已经否定了。    那么如何向上加仓呢?       我们看对了趋势，走势良好，如何才能挣的更多呢？    答案就是金字塔式加仓。    但是值得注意的是部位最好不要超出凯利的单笔最适比例太多。以免趋势逆转后的乐极生悲。这里的关键还是那个盈亏比。趋势朝着有利的方向发展，那么P会变大，最好是保证R不变进行加仓。    加仓过多后，理论的盈亏比会下降(新加部位会拖累R)，实际取得的收益可能并不一定多。这也许就是所谓的垃圾仓位吧。    凯利公式与期货    在国内可以保证金交易的主要有股指期货，商品期货，电子盘和外汇等。    后两者我懂得很少，也就不涉及。    只谈股指期货和商品期货。    由于是保证金交易，假如你总共有50万的资金做股指期货，6倍的杠杆，你的成功率是50%，盈亏比是3，那么F=((3+1)*0.5-1)/3=33.3%       现在的点位是3000点，每点300元，那么你的最大持仓头寸为50万*1/3（可用资金），每手需要3000*300/6=15万元。    那么你只可以做一手。    是呀，看出来了吧。没有钱去做股指期货太危险了。到了4000点，50万连一手都做不了。    真不知吗，某些人是如何设计的。    美丽的光环下是丑陋的嘴脸啊!!!!!       再说国内的商品期货，大致你能计算出自己的最大持仓仓位和承受能力了吧。也许有的对你来说，根本不能保证去参与。那就退出吧。    凯利公式、资金管理与交易系统    一个交易系统需要注意的还有以下几点：    第一是连续亏损次数。    第二是资金回撤率。    第三是最大单笔亏损。    这些也可以对凯利公式的F进行修正。　  修正凯利公式    在没有交易以前我们无论如何也不知道未来的交易最终的收益和亏损到底有多大。    这样我们只能使用交易以前的期望值来衡量，如果行情判断正确，从技术理论上讲这笔单应该在什么地方平仓了结，这个理论值就是我们未来的盈利期望值。如果一笔单下去后做错了，至少应该在止损位斩仓出来，那么这个止损点将是我们计算亏损的期望值，所以凯利公式修改为：    修正凯利公式         仓位=P-（1-P）/（（收益期望值）/（亏损期望值））        =P-（1-P）*（亏损期望值）/（收益期望值）    凯利修正后的公式最大仓位为100%，不能解决信用扩张的问题，在股票中使用比较合适。    而道升资金管理方法（可以自己查找，尤其是做期货的话）在股票和期货中都适用。    仓位＝[交易者能够承受的最大亏损额度/开仓点到止损点之间的幅度]*100%       这个公式对于套用技术的支撑与压力位更容易些。大家可以借鉴一下。
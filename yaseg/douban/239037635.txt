haxe_Web

服务端：━━━━━━━━━━Jack━━━━━━━━━2012.9.27━━━━━━━━━━package ;import haxe.remoting.Context;import haxe.remoting.HttpConnection;import neko.Lib;/** * ... * @author 云中君_Jack */class Main {  function new()   {   }  static function main()   {    var ctx = new Context();    ctx.addObject("WebServer",new WebServer());    if( HttpConnection.handleRequest(ctx) )      return;    // handle normal request    Lib.println("This is a remoting server !");        var ws = new WebServer();        Lib.println(ws.foo("xx"));  } }━━━━━━━━━━Jack━━━━━━━━━2012.9.27━━━━━━━━━━package ;import neko.io.File;import neko.Lib;import neko.Web;import sys.FileSystem;/** * ... * @author 云中君_Jack */class WebServer {        static var WORKPATH = "D:/Green_Soft/WWW/PhoneSever_neko/bin/";        public function new()         {                        }        public function foo(x)         {                 if (FileSystem.exists(WORKPATH+"data/phone.xml"))                {                        var phone_xml = Xml.parse(File.getContent(WORKPATH + "data/phone.xml"));                        phone_xml.firstElement().set("visit", Std.string(Std.parseInt(phone_xml.firstElement().get("visit")) + 1));                        return phone_xml.firstElement().get("visit") + "&" + phone_xml.toString();                }                else                {                        return "服务器无数据文件";                }        }}━━━━━━━━━━Jack━━━━━━━━━2012.9.27━━━━━━━━━━客户端：━━━━━━━━━━Jack━━━━━━━━━2012.9.27━━━━━━━━━━package ;import flash.display.StageAlign;import flash.display.StageScaleMode;import flash.Lib;import haxe.remoting.HttpAsyncConnection;/** * ... * @author 云中君_Jack */class Main {  static function main()   {    var URL = "";    var cnx = haxe.remoting.HttpAsyncConnection.urlConnect(URL);    cnx.setErrorHandler( function(err) trace("Error : " + Std.string(err)) );        trace("xxx");    cnx.WebServer.foo.call(["云中君"],display);  }  static function display(v)  {    trace(v);  }}